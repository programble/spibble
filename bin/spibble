#!/usr/bin/env ruby

require 'spibble'

spibble = Spibble::Application.new

if ARGV.empty?
  spibble.list
elsif ARGV[0].start_with? ?-
  case ARGV.shift
  when '-a', '--add'
    spibble.add
  when '-i', '--import'
    spibble.import(ARGV)
  end
elsif ARGV[0].start_with? ?+
  offset = ARGV.shift[1..-1]
  offset = offset.to_i if offset =~ /^\d+$/
  spibble.scrobble(ARGV.join(' '), offset)
else
  spibble.scrobble(ARGV.join(' '))
end
